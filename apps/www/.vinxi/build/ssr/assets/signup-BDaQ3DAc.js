import{jsxs as l,jsx as e}from"react/jsx-runtime";import{zodResolver as X}from"@hookform/resolvers/zod";import{u as Y,c as _,B as $}from"./button-U5Omqg_X.js";import*as a from"react";import{c as G,b as J,d as A,P as Q}from"./index-DJ3tN8qV.js";import{u as V}from"./index-B_-Stg42.js";import{P as z}from"./index-DXPxg-Qg.js";import{Check as W}from"lucide-react";import{F as Z,a as v,b as x,c as g,d as w,e as P,f as N}from"./form-YLSo8OmR.js";import{I as B}from"./input-i05uZG0N.js";import{P as ee}from"./password-input-CkSUh9RZ.js";import{useForm as te}from"react-hook-form";import{toast as j}from"sonner";import*as C from"zod";import{a as re}from"./auth-client-CfR_Uf3d.js";import"react-dom";import"better-auth/client/plugins";import"better-auth/react";function oe(t){const r=a.useRef({value:t,previous:t});return a.useMemo(()=>(r.current.value!==t&&(r.current.previous=r.current.value,r.current.value=t),r.current.previous),[t])}var D="Checkbox",[ne,Ee]=G(D),[ae,ce]=ne(D),H=a.forwardRef((t,r)=>{const{__scopeCheckbox:n,name:o,checked:i,defaultChecked:s,required:h,disabled:m,value:y="on",onCheckedChange:E,form:u,...R}=t,[p,k]=a.useState(null),S=Y(r,c=>k(c)),I=a.useRef(!1),M=p?u||!!p.closest("form"):!0,[f=!1,F]=J({prop:i,defaultProp:s,onChange:E}),U=a.useRef(f);return a.useEffect(()=>{const c=p?.form;if(c){const b=()=>F(U.current);return c.addEventListener("reset",b),()=>c.removeEventListener("reset",b)}},[p,F]),l(ae,{scope:n,state:f,disabled:m,children:[e(z.button,{type:"button",role:"checkbox","aria-checked":d(f)?"mixed":f,"aria-required":h,"data-state":K(f),"data-disabled":m?"":void 0,disabled:m,value:y,...R,ref:S,onKeyDown:A(t.onKeyDown,c=>{c.key==="Enter"&&c.preventDefault()}),onClick:A(t.onClick,c=>{F(b=>d(b)?!0:!b),M&&(I.current=c.isPropagationStopped(),I.current||c.stopPropagation())})}),M&&e(se,{control:p,bubbles:!I.current,name:o,value:y,checked:f,required:h,disabled:m,form:u,style:{transform:"translateX(-100%)"},defaultChecked:d(s)?!1:s})]})});H.displayName=D;var L="CheckboxIndicator",O=a.forwardRef((t,r)=>{const{__scopeCheckbox:n,forceMount:o,...i}=t,s=ce(L,n);return e(Q,{present:o||d(s.state)||s.state===!0,children:e(z.span,{"data-state":K(s.state),"data-disabled":s.disabled?"":void 0,...i,ref:r,style:{pointerEvents:"none",...t.style}})})});O.displayName=L;var se=t=>{const{control:r,checked:n,bubbles:o=!0,defaultChecked:i,...s}=t,h=a.useRef(null),m=oe(n),y=V(r);a.useEffect(()=>{const u=h.current,R=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(R,"checked").set;if(m!==n&&k){const S=new Event("click",{bubbles:o});u.indeterminate=d(n),k.call(u,d(n)?!1:n),u.dispatchEvent(S)}},[m,n,o]);const E=a.useRef(d(n)?!1:n);return e("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??E.current,...s,tabIndex:-1,ref:h,style:{...t.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function d(t){return t==="indeterminate"}function K(t){return d(t)?"indeterminate":t?"checked":"unchecked"}var q=H,ie=O;const T=a.forwardRef(({className:t,...r},n)=>a.createElement(q,{ref:n,className:_("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...r},a.createElement(ie,{className:_("flex items-center justify-center text-current")},a.createElement(W,{className:"h-4 w-4"}))));T.displayName=q.displayName;const le=C.object({name:C.string().min(2).max(255),email:C.string().email(),password:C.string().min(8).max(255),policy:C.literal(!0)}),Re=function(){const r=te({resolver:X(le)});async function n(o){try{const{error:i}=await re.signUp.email(o);i?j.error(i.message):j.success("Account created successfully. Check your email to verify your account.")}catch{j.error("Failed to submit the form. Please try again.")}}return e("div",{className:"flex justify-center items-center h-dvh",children:l("div",{className:"w-[30rem] border p-4 rounded-lg space-y-6",children:[l("div",{className:"space-y-2",children:[e("h1",{className:"font-bold",children:"Sign Up"}),e("p",{className:"text-muted-foreground",children:"Create an account to access smartflow"})]}),e(Z,{...r,children:l("form",{onSubmit:r.handleSubmit(n),className:"space-y-2 w-full",children:[e(v,{control:r.control,name:"name",render:({field:o})=>l(x,{children:[e(g,{children:"Name"}),e(w,{children:e(B,{placeholder:"Alex",type:"text",...o})}),e(P,{children:"How we should call you."}),e(N,{})]})}),e(v,{control:r.control,name:"email",render:({field:o})=>l(x,{children:[e(g,{children:"Email"}),e(w,{children:e(B,{placeholder:"alex@smart-flow.site",type:"email",...o})}),e(P,{children:"Communication & authentification email."}),e(N,{})]})}),e(v,{control:r.control,name:"password",render:({field:o})=>l(x,{children:[e(g,{children:"Password"}),e(w,{children:e(ee,{placeholder:"Placeholder",...o})}),e(P,{children:"Enter a password."}),e(N,{})]})}),e(v,{control:r.control,name:"policy",render:({field:o})=>l(x,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e(w,{children:e(T,{checked:o.value,onCheckedChange:o.onChange})}),l("div",{className:"space-y-1 leading-none",children:[e(g,{children:"I accept the user policy"}),e(P,{children:"You can manage your mobile notifications in the mobile settings page."}),e(N,{})]})]})}),e($,{className:"w-full",type:"submit",children:"Submit"})]})})]})})};export{Re as component};
