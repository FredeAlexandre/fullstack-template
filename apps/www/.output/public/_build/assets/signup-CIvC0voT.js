import{r as n,j as e,t as S}from"./client-B6G1yI40.js";import{o as U,s as I,l as X,u as Y,F as $,a as j,b as y,c as C,d as k,e as v,f as g,t as G}from"./index-Dc0PFZ0F.js";import{u as J,c as M,B as Q}from"./button-ZFDmQ8y7.js";import{c as V,b as W,d as _,P as Z}from"./index-8ZJ2ccQT.js";import{u as ee,C as te}from"./index-CYy3-uzz.js";import{P as B}from"./index-ChVlJtfC.js";import{I as A}from"./input-CCmfXc7h.js";import{P as re}from"./password-input-ByiZ2GBG.js";import{a as se}from"./auth-client-CXKUJGY8.js";import"./createLucideIcon-DrdjHrXf.js";function oe(t){const r=n.useRef({value:t,previous:t});return n.useMemo(()=>(r.current.value!==t&&(r.current.previous=r.current.value,r.current.value=t),r.current.previous),[t])}var F="Checkbox",[ne,ke]=V(F),[ae,ce]=ne(F),T=n.forwardRef((t,r)=>{const{__scopeCheckbox:o,name:s,checked:i,defaultChecked:c,required:h,disabled:d,value:x="on",onCheckedChange:w,form:u,...P}=t,[m,b]=n.useState(null),N=J(r,a=>b(a)),E=n.useRef(!1),D=m?u||!!m.closest("form"):!0,[p=!1,R]=W({prop:i,defaultProp:c,onChange:w}),z=n.useRef(p);return n.useEffect(()=>{const a=m?.form;if(a){const f=()=>R(z.current);return a.addEventListener("reset",f),()=>a.removeEventListener("reset",f)}},[m,R]),e.jsxs(ae,{scope:o,state:p,disabled:d,children:[e.jsx(B.button,{type:"button",role:"checkbox","aria-checked":l(p)?"mixed":p,"aria-required":h,"data-state":O(p),"data-disabled":d?"":void 0,disabled:d,value:x,...P,ref:N,onKeyDown:_(t.onKeyDown,a=>{a.key==="Enter"&&a.preventDefault()}),onClick:_(t.onClick,a=>{R(f=>l(f)?!0:!f),D&&(E.current=a.isPropagationStopped(),E.current||a.stopPropagation())})}),D&&e.jsx(ie,{control:m,bubbles:!E.current,name:s,value:x,checked:p,required:h,disabled:d,form:u,style:{transform:"translateX(-100%)"},defaultChecked:l(c)?!1:c})]})});T.displayName=F;var H="CheckboxIndicator",L=n.forwardRef((t,r)=>{const{__scopeCheckbox:o,forceMount:s,...i}=t,c=ce(H,o);return e.jsx(Z,{present:s||l(c.state)||c.state===!0,children:e.jsx(B.span,{"data-state":O(c.state),"data-disabled":c.disabled?"":void 0,...i,ref:r,style:{pointerEvents:"none",...t.style}})})});L.displayName=H;var ie=t=>{const{control:r,checked:o,bubbles:s=!0,defaultChecked:i,...c}=t,h=n.useRef(null),d=oe(o),x=ee(r);n.useEffect(()=>{const u=h.current,P=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(P,"checked").set;if(d!==o&&b){const N=new Event("click",{bubbles:s});u.indeterminate=l(o),b.call(u,l(o)?!1:o),u.dispatchEvent(N)}},[d,o,s]);const w=n.useRef(l(o)?!1:o);return e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??w.current,...c,tabIndex:-1,ref:h,style:{...t.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function l(t){return t==="indeterminate"}function O(t){return l(t)?"indeterminate":t?"checked":"unchecked"}var K=T,le=L;const q=n.forwardRef(({className:t,...r},o)=>e.jsx(K,{ref:o,className:M("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...r,children:e.jsx(le,{className:M("flex items-center justify-center text-current"),children:e.jsx(te,{className:"h-4 w-4"})})}));q.displayName=K.displayName;const de=U({name:I().min(2).max(255),email:I().email(),password:I().min(8).max(255),policy:X(!0)}),ve=function(){const r=Y({resolver:G(de)});async function o(s){try{const{error:i}=await se.signUp.email(s);i?S.error(i.message):S.success("Account created successfully. Check your email to verify your account.")}catch{S.error("Failed to submit the form. Please try again.")}}return e.jsx("div",{className:"flex justify-center items-center h-dvh",children:e.jsxs("div",{className:"w-[30rem] border p-4 rounded-lg space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{className:"font-bold",children:"Sign Up"}),e.jsx("p",{className:"text-muted-foreground",children:"Create an account to access smartflow"})]}),e.jsx($,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(o),className:"space-y-2 w-full",children:[e.jsx(j,{control:r.control,name:"name",render:({field:s})=>e.jsxs(y,{children:[e.jsx(C,{children:"Name"}),e.jsx(k,{children:e.jsx(A,{placeholder:"Alex",type:"text",...s})}),e.jsx(v,{children:"How we should call you."}),e.jsx(g,{})]})}),e.jsx(j,{control:r.control,name:"email",render:({field:s})=>e.jsxs(y,{children:[e.jsx(C,{children:"Email"}),e.jsx(k,{children:e.jsx(A,{placeholder:"alex@smart-flow.site",type:"email",...s})}),e.jsx(v,{children:"Communication & authentification email."}),e.jsx(g,{})]})}),e.jsx(j,{control:r.control,name:"password",render:({field:s})=>e.jsxs(y,{children:[e.jsx(C,{children:"Password"}),e.jsx(k,{children:e.jsx(re,{placeholder:"Placeholder",...s})}),e.jsx(v,{children:"Enter a password."}),e.jsx(g,{})]})}),e.jsx(j,{control:r.control,name:"policy",render:({field:s})=>e.jsxs(y,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(k,{children:e.jsx(q,{checked:s.value,onCheckedChange:s.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(C,{children:"I accept the user policy"}),e.jsx(v,{children:"You can manage your mobile notifications in the mobile settings page."}),e.jsx(g,{})]})]})}),e.jsx(Q,{className:"w-full",type:"submit",children:"Submit"})]})})]})})};export{ve as component};
